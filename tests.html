<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--<script src="http://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js" type="text/javascript"></script>-->
<script src="http://js.static.yandex.net/jquery/1.3.2/jquery.js" type="text/javascript"></script>
<title></title>
<script type="text/javascript">
    var shmakowiki2html,
        frame,
        retry = 10;

    $(function(){
        frame = $('<iframe style="display:none" src="shmakowiki2html.html"></iframe>').appendTo('body')[0];
    });
    $(function(){
        if (retry) {
            try {
                shmakowiki2html = frame.contentWindow._ShmakoWikiToHtml;
                if (!shmakowiki2html) {
                    throw true;
                } else {
                    $(document).trigger('ready.shmakowiki2html');
                }
            } catch(e) {
                retry--;
                setTimeout(arguments.callee, 42);
            }
        }
    });

    $(document).bind('ready.shmakowiki2html', function(){
        $('textarea').show().change(function(e){
            //console.time('do');
            $('#res').html(shmakowiki2html(e.target.value));
            //console.timeEnd('do');
        });
    });
</script>
<link href="ometa-highlighter/tests.css" rel="stylesheet"/>
</head>
<body>
    <textarea style="display: none; width: 100%; height: 250px;"></textarea>
    <div id="res"></div>
</body>
</html>
