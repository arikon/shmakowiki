{var ShmakoWiki=exports.ShmakoWiki=OMeta.delegated({"oneOf":function(){var $elf=this,a,a;return $elf._or((function(){return (function(){a=$elf._apply("anything");$elf._pred((a["length"] == (1)));return $elf._applyWithArgs("apply",a.pop())})()}),(function(){return (function(){a=$elf._apply("anything");$elf._pred((a["length"] > (1)));return $elf._or((function(){return $elf._applyWithArgs("apply",a.pop())}),(function(){return $elf._applyWithArgs("oneOf",a)}))})()}))},"escapedChar":function(){var $elf=this,c;return (function(){$elf._applyWithArgs("exactly","~");c=$elf._apply("char");return c})()},"escaped":function(){var $elf=this,c;return (function(){c=$elf._many1(function(){return $elf._apply("escapedChar")});return ["escaped",c.join("")]})()},"b":function(){var $elf=this;return $elf._applyWithArgs("seq","**")},"i":function(){var $elf=this;return $elf._applyWithArgs("seq","//")},"u":function(){var $elf=this;return $elf._applyWithArgs("seq","__")},"s":function(){var $elf=this;return (function(){$elf._not(function(){return $elf._applyWithArgs("exactly"," ")});$elf._applyWithArgs("seq","--");return $elf._not(function(){return $elf._applyWithArgs("exactly"," ")})})()},"m":function(){var $elf=this;return $elf._applyWithArgs("seq","##")},"sup":function(){var $elf=this;return $elf._applyWithArgs("seq","^^")},"sub":function(){var $elf=this;return $elf._applyWithArgs("seq",",,")},"ext":function(){var $elf=this;return $elf._applyWithArgs("seq","%%")},"linkStart":function(){var $elf=this;return $elf._or((function(){return $elf._applyWithArgs("seq","((")}),(function(){return $elf._applyWithArgs("seq","[[")}))},"linkEnd":function(){var $elf=this;return $elf._or((function(){return $elf._applyWithArgs("seq","))")}),(function(){return $elf._applyWithArgs("seq","]]")}))},"l":function(){var $elf=this;return $elf._or((function(){return $elf._apply("linkStart")}),(function(){return $elf._apply("linkEnd")}))},"lineBreak":function(){var $elf=this;return (function(){$elf._applyWithArgs("seq","\\\\");return ["lineBreak",[]]})()},"special":function(){var $elf=this,c;return (function(){c=$elf._or((function(){return $elf._apply("b")}),(function(){return $elf._apply("i")}),(function(){return $elf._apply("u")}),(function(){return $elf._apply("s")}),(function(){return $elf._apply("m")}),(function(){return $elf._apply("sup")}),(function(){return $elf._apply("sub")}),(function(){return $elf._apply("l")}),(function(){return $elf._apply("lineBreak")}));return ["special",c]})()},"between":function(){var $elf=this,t,n,nn,c;return (function(){t=$elf._apply("anything");n=$elf._apply("anything");nn=(function(){$elf._applyWithArgs("apply",t);return ShmakoWiki.arrAdd(n,t)})();c=$elf._many(function(){return (function(){$elf._not(function(){return $elf._applyWithArgs("oneOf",ShmakoWiki.arrCopy(nn))});return $elf._applyWithArgs("allInline",nn)})()});$elf._applyWithArgs("apply",t);return c})()},"between_":function(){var $elf=this,t,c;return (function(){t=$elf._apply("anything");$elf._applyWithArgs("apply",t);c=$elf._many(function(){return (function(){$elf._not(function(){return $elf._apply("special")});return $elf._apply("text")})()});$elf._or((function(){return $elf._not(function(){return $elf._not(function(){return $elf._apply("special")})})}),(function(){return $elf._apply("end")}));return c})()},"bold":function(){var $elf=this,n,c;return (function(){n=$elf._apply("anything");c=$elf._applyWithArgs("between","b",n);return ["bold",c]})()},"bold_":function(){var $elf=this,c;return (function(){c=$elf._applyWithArgs("between_","b");return ["bold_",c]})()},"italic":function(){var $elf=this,n,c;return (function(){n=$elf._apply("anything");c=$elf._applyWithArgs("between","i",n);return ["italic",c]})()},"italic_":function(){var $elf=this,c;return (function(){c=$elf._applyWithArgs("between_","i");return ["italic_",c]})()},"underline":function(){var $elf=this,n,c;return (function(){n=$elf._apply("anything");c=$elf._applyWithArgs("between","u",n);return ["underline",c]})()},"underline_":function(){var $elf=this,c;return (function(){c=$elf._applyWithArgs("between_","u");return ["underline_",c]})()},"strike":function(){var $elf=this,n,c;return (function(){n=$elf._apply("anything");c=$elf._applyWithArgs("between","s",n);return ["strike",c]})()},"strike_":function(){var $elf=this,c;return (function(){c=$elf._applyWithArgs("between_","s");return ["strike_",c]})()},"monospace":function(){var $elf=this,n,c;return (function(){n=$elf._apply("anything");c=$elf._applyWithArgs("between","m",n);return ["monospace",c]})()},"monospace_":function(){var $elf=this,c;return (function(){c=$elf._applyWithArgs("between_","m");return ["monospace_",c]})()},"superscript":function(){var $elf=this,n,c;return (function(){n=$elf._apply("anything");c=$elf._applyWithArgs("between","sup",n);return ["superscript",c]})()},"superscript_":function(){var $elf=this,c;return (function(){c=$elf._applyWithArgs("between_","sup");return ["superscript_",c]})()},"subscript":function(){var $elf=this,n,c;return (function(){n=$elf._apply("anything");c=$elf._applyWithArgs("between","sub",n);return ["subscript",c]})()},"subscript_":function(){var $elf=this,c;return (function(){c=$elf._applyWithArgs("between_","sub");return ["subscript_",c]})()},"link":function(){var $elf=this,n,nn,c,cc;return (function(){n=$elf._apply("anything");nn=(function(){$elf._apply("linkStart");return ShmakoWiki.arrAdd(n,"l")})();c=$elf._many1(function(){return (function(){$elf._not(function(){return $elf._apply("space")});$elf._not(function(){return $elf._apply("linkEnd")});return $elf._apply("char")})()});$elf._apply("spacesNoNl");cc=$elf._many(function(){return (function(){$elf._not(function(){return $elf._applyWithArgs("oneOf",ShmakoWiki.arrCopy(nn))});return $elf._applyWithArgs("allInline",nn)})()});$elf._apply("linkEnd");return ["link",c.join(""),cc]})()},"link_":function(){var $elf=this,c;return $elf._or((function(){return (function(){$elf._apply("linkStart");c=$elf._many1(function(){return (function(){$elf._not(function(){return $elf._apply("space")});return $elf._apply("char")})()});$elf._or((function(){return $elf._not(function(){return $elf._not(function(){return $elf._apply("space")})})}),(function(){return $elf._not(function(){return $elf._not(function(){return $elf._apply("special")})})}),(function(){return $elf._apply("end")}));return ["link_",c.join("")]})()}),(function(){return (function(){$elf._apply("linkEnd");return ""})()}))},"mdash":function(){var $elf=this;return (function(){$elf._applyWithArgs("seq"," -- ");return " â€“ "})()},"text":function(){var $elf=this,c,c;return $elf._or((function(){return (function(){c=$elf._many1(function(){return (function(){$elf._not(function(){return $elf._apply("special")});$elf._not(function(){return $elf._apply("escapedChar")});return $elf._or((function(){return $elf._apply("mdash")}),(function(){return $elf._apply("char")}))})()});return c.join("")})()}),(function(){return (function(){c=$elf._apply("escaped");return c})()}))},"inline":function(){var $elf=this,n;return (function(){n=$elf._apply("anything");return $elf._or((function(){return $elf._applyWithArgs("bold",n)}),(function(){return $elf._applyWithArgs("italic",n)}),(function(){return $elf._applyWithArgs("underline",n)}),(function(){return $elf._applyWithArgs("strike",n)}),(function(){return $elf._applyWithArgs("monospace",n)}),(function(){return $elf._applyWithArgs("superscript",n)}),(function(){return $elf._applyWithArgs("subscript",n)}),(function(){return $elf._applyWithArgs("link",n)}),(function(){return $elf._apply("lineBreak")}),(function(){return $elf._apply("text")}))})()},"inline_":function(){var $elf=this;return $elf._or((function(){return $elf._apply("bold_")}),(function(){return $elf._apply("italic_")}),(function(){return $elf._apply("underline_")}),(function(){return $elf._apply("superscript_")}),(function(){return $elf._apply("subscript_")}),(function(){return $elf._apply("strike_")}),(function(){return $elf._apply("monospace_")}),(function(){return $elf._apply("link_")}))},"allInline":function(){var $elf=this,n;return (function(){n=$elf._apply("anything");return $elf._or((function(){return $elf._applyWithArgs("inline",n)}),(function(){return (function(){$elf._not(function(){return $elf._applyWithArgs("inline",n)});return $elf._apply("inline_")})()}))})()},"topInline":function(){var $elf=this;return $elf._many1(function(){return $elf._applyWithArgs("allInline",[])})},"spacesNoNl":function(){var $elf=this;return $elf._many(function(){return (function(){$elf._not(function(){return $elf._applyWithArgs("exactly","\n")});return $elf._apply("space")})()})},"spacesNlSpaces":function(){var $elf=this;return (function(){$elf._apply("spacesNoNl");$elf._applyWithArgs("exactly","\n");$elf._apply("spacesNoNl");return " "})()},"nl":function(){var $elf=this;return (function(){$elf._applyWithArgs("exactly","\n");return $elf._many1(function(){return (function(){$elf._apply("spacesNoNl");return $elf._applyWithArgs("exactly","\n")})()})})()},"headerStart":function(){var $elf=this,c;return (function(){c=$elf._many1(function(){return $elf._applyWithArgs("exactly","=")});$elf._apply("spacesNoNl");return (c.join("")["length"] - (1))})()},"headerEnd":function(){var $elf=this;return (function(){$elf._many(function(){return $elf._applyWithArgs("exactly","=")});return $elf._or((function(){return (function(){$elf._applyWithArgs("exactly","\n");return $elf._many(function(){return (function(){$elf._apply("spacesNoNl");return $elf._applyWithArgs("exactly","\n")})()})})()}),(function(){return $elf._apply("end")}))})()},"header":function(){var $elf=this,l,cc,c;return (function(){l=$elf._apply("headerStart");c=(function(){cc=$elf._many1(function(){return (function(){$elf._not(function(){return $elf._apply("headerEnd")});return $elf._apply("char")})()});return cc.join("")})();$elf._apply("headerEnd");return [("header" + ((l <= (6))?l:(6))),ShmakoWiki.matchAll(c,"topInline")]})()},"blockEnd":function(){var $elf=this;return $elf._or((function(){return (function(){$elf._applyWithArgs("exactly","\n");return $elf._not(function(){return $elf._not(function(){return $elf._apply("extBlockStart")})})})()}),(function(){return $elf._apply("nl")}),(function(){return (function(){$elf._applyWithArgs("exactly","\n");return $elf._not(function(){return $elf._not(function(){return $elf._apply("anyLi")})})})()}),(function(){return (function(){$elf._applyWithArgs("exactly","\n");return $elf._not(function(){return $elf._not(function(){return $elf._apply("headerStart")})})})()}),(function(){return $elf._apply("end")}))},"para":function(){var $elf=this,c;return (function(){c=$elf._many1(function(){return (function(){$elf._not(function(){return $elf._apply("blockEnd")});return $elf._or((function(){return $elf._apply("spacesNlSpaces")}),(function(){return $elf._apply("char")}))})()});c.join("");$elf._apply("blockEnd");return ["para",ShmakoWiki.matchAll(c,"topInline")]})()},"uli":function(){var $elf=this,s;return (function(){s=$elf._apply("spacesNoNl");$elf._applyWithArgs("exactly","*");$elf._not(function(){return $elf._applyWithArgs("exactly","*")});$elf._apply("spacesNoNl");return s.join("")})()},"oli":function(){var $elf=this,s;return (function(){s=$elf._apply("spacesNoNl");$elf._many1(function(){return $elf._apply("digit")});$elf._applyWithArgs("exactly",".");$elf._apply("spacesNoNl");return s.join("")})()},"anyLi":function(){var $elf=this;return $elf._or((function(){return $elf._apply("uli")}),(function(){return $elf._apply("oli")}))},"listItemContent":function(){var $elf=this,c;return (function(){c=$elf._many1(function(){return (function(){$elf._not(function(){return $elf._apply("blockEnd")});return $elf._apply("char")})()});return ShmakoWiki.matchAll(c.join(""),"topInline")})()},"anySubList":function(){var $elf=this,l,s,sl;return (function(){l=$elf._apply("anything");$elf._applyWithArgs("exactly","\n");$elf._not(function(){return $elf._not(function(){return s=$elf._apply("anyLi")})});$elf._pred((s["length"] > l["length"]));sl=$elf._apply("anyList");return sl})()},"listItem":function(){var $elf=this,t,l,s,c,cc;return (function(){t=$elf._apply("anything");l=$elf._apply("anything");s=$elf._applyWithArgs("apply",t);$elf._pred((s["length"] == l["length"]));c=$elf._apply("listItemContent");cc=$elf._or((function(){return $elf._many1(function(){return $elf._applyWithArgs("anySubList",s)})}),(function(){return (function(){$elf._or((function(){return (function(){$elf._applyWithArgs("exactly","\n");return $elf._not(function(){return $elf._not(function(){return $elf._applyWithArgs("apply",t)})})})()}),(function(){return $elf._not(function(){return $elf._not(function(){return $elf._apply("blockEnd")})})}));return ""})()}));return (function (){if(cc){c=c.concat(cc)}else{undefined};return [(t + "stItem"),c]})()})()},"list":function(){var $elf=this,t,s,c;return (function(){t=$elf._apply("anything");$elf._not(function(){return $elf._not(function(){return s=$elf._applyWithArgs("apply",t)})});c=$elf._many1(function(){return $elf._applyWithArgs("listItem",t,s)});return [(t + "st"),c]})()},"anyList":function(){var $elf=this;return $elf._or((function(){return $elf._applyWithArgs("list","uli")}),(function(){return $elf._applyWithArgs("list","oli")}))},"extBlockStart":function(){var $elf=this,t,tt,c,cc;return (function(){tt=$elf._or((function(){return (function(){$elf._apply("ext");t=$elf._apply("char");$elf._applyWithArgs("exactly","%");return t})()}),(function(){return (function(){$elf._apply("ext");return ""})()}));c=$elf._many(function(){return (function(){$elf._not(function(){return $elf._apply("space")});return $elf._apply("char")})()});$elf._apply("spacesNoNl");cc=$elf._many(function(){return (function(){$elf._not(function(){return $elf._applyWithArgs("exactly","\n")});return $elf._apply("char")})()});$elf._applyWithArgs("exactly","\n");return [tt,c.join(""),cc.join("")]})()},"extBlockEnd":function(){var $elf=this,t,t;return $elf._or((function(){return (function(){t=$elf._apply("anything");$elf._pred((t["length"] == (0)));$elf._many(function(){return $elf._apply("space")});return $elf._apply("ext")})()}),(function(){return (function(){t=$elf._apply("char");$elf._pred((t["length"] > (0)));$elf._many(function(){return $elf._apply("space")});$elf._applyWithArgs("exactly","%");$elf._applyWithArgs("seq",t);return $elf._apply("ext")})()}))},"extBlock":function(){var $elf=this,s,cc,c;return (function(){s=$elf._apply("extBlockStart");c=(function(){cc=$elf._many1(function(){return (function(){$elf._not(function(){return $elf._applyWithArgs("extBlockEnd",s[(0)])});return $elf._apply("char")})()});return cc.join("")})();$elf._applyWithArgs("extBlockEnd",s[(0)]);$elf._or((function(){return $elf._apply("blockEnd")}),(function(){return $elf._applyWithArgs("exactly","\n")}));return ["extention",s[(1)],(ShmakoWiki["extentions"].hasOwnProperty(s[(1)])?ShmakoWiki["extentions"][s[(1)]](c,s[(2)]):c),s[(2)]]})()},"allBlock":function(){var $elf=this,l;return $elf._or((function(){return $elf._apply("extBlock")}),(function(){return (function(){l=$elf._apply("anyList");$elf._apply("blockEnd");return l})()}),(function(){return $elf._apply("header")}),(function(){return $elf._apply("para")}))},"topLevel":function(){var $elf=this;return $elf._many1(function(){return $elf._apply("allBlock")})}});ShmakoWiki["extentions"]=({"ohl": (function (c,p){return OmetaHighlighter.matchAll(c,p)})});ShmakoWiki["extentions"]["hl"]=ShmakoWiki["extentions"]["ohl"];ShmakoWiki["arrJoin"]=(function (arr1,arr2){var newArr=ShmakoWiki.arrCopy(arr1);for(var i=(0);(i < arr2["length"]);i++){newArr[newArr["length"]]=arr2[i]};return newArr});ShmakoWiki["arrCopy"]=(function (arr){var newArr=[];for(var i=(0);(i < arr["length"]);i++){newArr[newArr["length"]]=arr[i]};return newArr});ShmakoWiki["arrAdd"]=(function (arr,elem){for(var i=(0);(i < arr["length"]);i++){if((arr[i] == elem)){return arr}else{undefined}};arr[arr["length"]]=elem;return arr})}
